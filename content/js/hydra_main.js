(()=>{"use strict";var t={536:function(t,n){var e=this&&this.__spreadArray||function(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))};n.__esModule=!0,n.setListeners=n.resizeViewbox=n.drawHydraImmediately=n.computeHydraLayout=n.HydraNode=n.SvgHydra=n.SvgHeadData=n.HydraSkeleton=n.CLONE_COLOR=void 0;n.CLONE_COLOR="#422aa8";var r=function(){function t(t){var n=this;this.parent=null,this.children=t,t.forEach((function(t){return t.parent=n}))}return t.prototype.deepcopy=function(){return new t(this.children.map((function(t){return t.deepcopy()})))},t.prototype.index=function(){for(var t,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)return this;var r=n[0];return r<this.children.length?(t=this.children[r]).index.apply(t,n.slice(1)):null},t.prototype.appendChild=function(){var n=new t([]);return n.parent=this,this.children.push(n),n},t.prototype.die=function(){if(null===this.parent)throw"Can't kill root!";var t=this.parent.children.indexOf(this);this.parent.children.splice(t,1)},t.prototype.generate_siblings=function(t){var n;if(null===this.parent)throw"Can't clone root!";for(var r=[],i=0;i<t;i++){var o=this.deepcopy();o.parent=this.parent,r.push(o)}var a=this.parent.children.indexOf(this);return(n=this.parent.children).splice.apply(n,e([a+1,0],r,!1)),r},t}();n.HydraSkeleton=r;var i=function(){function t(t,n,e){this.x=t,this.y=n,this.children=e}return t.fromHydra=function(n){if(0==n.children.length)return new t(0,0,[]);var e=n.children.map((function(n){return t.fromHydra(n)}));e.forEach((function(t,n){return t.shift(n,1)}));for(var r=0;r<e.length;r++)for(var i=r-1;i>=0;i--){for(var o=e[r].leftContour(),a=e[i].rightContour(),h=Math.min(o.length,a.length),c=1,l=0;l<h;l++)c=Math.min(c,o[l]-a[l]);if(!(c>=1)){var s=1-c,u=r-i;for(l=1;l<=u;l++)e[i+l].shift(s*l/u,0)}}var f=(e[0].x+e[e.length-1].x)/2;return e.forEach((function(t){return t.shift(-f,0)})),new t(0,0,e)},t.prototype.shift=function(t,n){this.x+=t,this.y+=n,this.children.forEach((function(e){return e.shift(t,n)}))},t.prototype._contour=function(t){var n=[];return function e(r,i){var o=r.x;if(i<n.length){var a=n[i];("left"==t&&o<a||"right"==t&&o>a)&&(n[i]=o)}else n.push(o);r.children.forEach((function(t){return e(t,i+1)}))}(this,0),n},t.prototype.leftContour=function(){return this._contour("left")},t.prototype.rightContour=function(){return this._contour("right")},t}(),o=function(t,n){this.head=t.circle(.5),n?(this.neck=t.line([0,0,0,0]).stroke({width:.1}),this.neck.back()):this.neck=null};n.SvgHeadData=o;var a=function(){function t(t,n){var e=t.group(),r=new Map;!function t(n,i){r.set(n,new o(e,!i)),n.children.forEach((function(n){return t(n,!1)}))}(n,!0),this.skeleton=n,this.svg_data_map=r,this.svg_group=e}return t.prototype.repositionNodes=function(){var t=i.fromHydra(this.skeleton),n=Math.min.apply(Math,t.leftContour()),e=this;!function t(r,i,o){var a,h=e.svg_data_map.get(r);h.head.center(2*i.y,1*i.x-n),null!==o&&(null===(a=h.neck)||void 0===a||a.plot(2*i.y,1*i.x-n,2*o.y,1*o.x-n));for(var c=0;c<r.children.length;c++)t(r.children[c],i.children[c],i)}(this.skeleton,t,null)},t.prototype.index=function(){for(var t,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=(t=this.skeleton).index.apply(t,n);return null===r?null:this.svg_data_map.get(r)},t.prototype.root=function(){return this.svg_data_map.get(this.skeleton)},t}();n.SvgHydra=a;var h=function(){function t(t,n){void 0===n&&(n=null),this.drawing=t,this.svgHead=t.circle(.5),this.svgNeck=null,this.parent=n,this.children=[],this.targetX=null,this.targetY=null,this.offsetX=null,null!==n&&(n.children.push(this),this.svgNeck=t.line([0,0,0,0]).stroke({width:.1}),this.svgNeck.back())}return t.prototype.isRoot=function(){return null===this.parent},t.prototype.isLeaf=function(){return 0===this.children.length},t.prototype.appendChild=function(){return new t(this.drawing,this)},t.prototype.getLeftSiblings=function(){if(this.isRoot())return[];var t=this.parent.children.indexOf(this);return this.parent.children.slice(0,t)},t.prototype.clone=function(){if(this.isRoot())throw"Can't clone root!";var t=this.parent.appendChild();!function t(n,e){e.targetX=n.targetX,e.targetY=n.targetY,e.offsetX=n.offsetX,n.children.forEach((function(n){return t(n,e.appendChild())}))}(this,t);var n=this.parent.children.indexOf(this);return this.parent.children.splice(n,0,t),this.parent.children.pop(),t},t.prototype.die=function(){if(!this.isLeaf())throw"Only leaves can be killed!";if(this.isRoot())throw"Can't die as root!";var t=this.parent.children.indexOf(this);this.parent.children.splice(t,1),this.svgHead.remove(),this.svgNeck.remove()},t}();function c(t){var n=1/0;function e(t,n){var e=[];return function t(n,r,i,o){var a=n.targetX+i;o<e.length?e[o]=r(e[o],a):e.push(a),i+=n.offsetX,n.children.forEach((function(n){return t(n,r,i,o+1)}))}(t,n,0,0),e}!function t(n){n.children.forEach((function(n){return t(n)}));var r=n.getLeftSiblings();if(0!==r.length){var i=r[r.length-1];n.targetX=i.targetX+1}else n.targetX=0;if(!n.isLeaf()){var o=n.children[0],a=n.children[n.children.length-1],h=(o.targetX+a.targetX)/2;n.offsetX=n.targetX-h}for(var c=e(n,Math.min),l=r.length-1;l>=0;l--){for(var s=e(r[l],Math.max),u=1,f=Math.min(s.length,c.length),d=0;d<f;d++)u=Math.min(u,c[d]-s[d]);if(!(u>=1)){var p=r.length-l,g=1-u;for(d=1;d<p;d++)r[l+d].targetX+=g*d/p,r[l+d].offsetX+=g*d/p;n.targetX+=g,n.offsetX+=g,c=c.map((function(t){return t+g}))}}}(t),function t(e,r){void 0===r&&(r=0),e.isRoot()?e.targetY=0:e.targetY=e.parent.targetY+2,e.targetX+=r,n=Math.min(n,e.targetX),r+=e.offsetX,e.children.forEach((function(n){return t(n,r)}))}(t),function t(e){e.targetX-=n,e.children.forEach((function(n){return t(n)}))}(t)}function l(t){return t.children.map((function(t){return l(t)})).reduce((function(t,n){return Math.max(t,n)}),t.targetX)}function s(t,n){return n.center(t.targetY,t.targetX)}function u(t,n){return n.plot(t.targetY,t.targetX,t.parent.targetY,t.parent.targetX)}function f(t,n,e,r,i){return t.children.forEach((function(t){return f(t,n,e,r,i)})),t.isRoot()||i(t,t.svgNeck.animate(n,e,0)),r(t,t.svgHead.animate(n,e,0))}function d(t){t.children.forEach((function(t){return d(t)})),s(t,t.svgHead),t.isRoot()||u(t,t.svgNeck)}function p(t,n){var e=1*l(n);t.viewbox(-.75,-.95,7.5,e+1.4+.5)}n.HydraNode=h,n.computeHydraLayout=c,n.drawHydraImmediately=d,n.resizeViewbox=p,n.setListeners=function t(e,r,i){var o,a=r.drawing;e.children.forEach((function(n){return t(n,r,i)})),e.svgHead.click((function(){e.isRoot()||!e.isLeaf()||h||(h=!0,i(),(o=a.group().add(e.svgNeck).add(e.svgHead)).animate(500,">",0).opacity(0).afterAll(l))}));var h=!1;function l(){if(o.remove(),e.die(),e.parent.isRoot())g();else{var n=e.parent.clone(),a=e.parent.clone();t(n,r,i),t(a,r,i),d(r),y(e.parent),y(n),y(a).afterAll(g)}}function g(){return c(r),p(a.animate(700,"<",0),r),f(r,700,"<",(function(t,n){return s(t,n.fill("#000"))}),(function(t,n){return u(t,n.stroke("#000"))})).afterAll(v)}function v(){r.isLeaf()&&alert("Wow... I can't believe you actually did it!\nSorry I didn't write anything cool for you yet. Perhaps I'll add something later.")}function y(t){return f(t,200,"<",(function(t,e){return e.fill(n.CLONE_COLOR)}),(function(t,e){return e.stroke(n.CLONE_COLOR)}))}}}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(()=>{var t=e(536),n=document.getElementById("reset-button"),r=document.getElementById("click-counter"),i=SVG("hydra-interactive"),o=0;function a(){r.textContent="Clicks: "+o,o+=1}function h(){i.clear(),o=0,a();var n=new t.HydraNode(i),e=n.appendChild().appendChild();e.appendChild(),e.appendChild(),(0,t.computeHydraLayout)(n),(0,t.drawHydraImmediately)(n),(0,t.resizeViewbox)(i,n),(0,t.setListeners)(n,n,a)}h(),n.addEventListener("click",h)})()})();