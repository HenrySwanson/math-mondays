(()=>{"use strict";var e={536:(e,r,t)=>{r.__esModule=!0,r.setListeners=r.resizeViewbox=r.SvgHydra=r.SvgHeadData=r.HydraSkeleton=r.CLONE_COLOR=void 0;r.CLONE_COLOR="#422aa8";var n=t(347);r.HydraSkeleton=function(e){this.tree=new n.Tree(null,e.map((function(e){return e.tree})))};var o=function(){function e(e,r,t){this.tree=new n.Tree({x:e,y:r},t.map((function(e){return e.tree})))}return e.fromTree=function(r){if(0===r.children.length)return new e(0,0,[]);for(var t=r.children.map((function(r,t){var n=e.fromTree(r);return n.shift(t,1),n})),n=0;n<t.length;n++)for(var o=n-1;o>=0;o--){for(var i=t[n].leftContour(),a=t[o].rightContour(),l=Math.min(i.length,a.length),h=1,u=0;u<l;u++)h=Math.min(h,i[u]-a[u]);if(!(h>=1)){var c=1-h,p=n-o;for(u=1;u<=p;u++)t[o+u].shift(c*u/p,0)}}var d=(t[0].tree.payload.x+t[t.length-1].tree.payload.x)/2;return t.forEach((function(e){return e.shift(-d,0)})),new e(0,0,t)},e.prototype.shift=function(e,r){this.tree.forEachPreorder((function(t){t.x+=e,t.y+=r}))},e.prototype._contour=function(e){var r=[];return this.tree.forEachPreorder((function(t,n){var o=t.x;if(n<r.length){var i=r[n];("left"==e&&o<i||"right"==e&&o>i)&&(r[n]=o)}else r.push(o)})),r},e.prototype.leftContour=function(){return this._contour("left")},e.prototype.rightContour=function(){return this._contour("right")},e}(),i=function(e,r){this.head=e.circle(.5),r?(this.neck=e.line([0,0,0,0]).stroke({width:.1}),this.neck.back()):this.neck=null};r.SvgHeadData=i;var a=function(){function e(e,r){this.svgGroup=e.group(),this.svgTree=this.createSvgHeads(r.tree,!0)}return e.prototype.createSvgHeads=function(e,r){var t=this;return void 0===r&&(r=!1),e.mapX((function(e){return new i(t.svgGroup,null!==e.parent)}))},e.prototype.repositionNodes=function(){var e=o.fromTree(this.svgTree),r=Math.min.apply(Math,e.leftContour());this.svgTree.zip(e.tree).forEachPreorderX((function(e){var t,n=e.parent,o=e.payload,i=o[0],a=o[1];if(i.head.center(2*a.y,1*a.x-r),null!==n){var l=n.payload[1];null===(t=i.neck)||void 0===t||t.plot(2*a.y,1*a.x-r,2*l.y,1*l.x-r)}}))},e.prototype.index=function(){for(var e,r,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return null!==(t=null===(r=(e=this.svgTree).index.apply(e,n))||void 0===r?void 0:r.payload)&&void 0!==t?t:null},e.prototype.root=function(){return this.svgTree.payload},e}();function l(e,r){var t=function(e){var r=o.fromTree(e.svgTree),t=Math.min.apply(Math,r.leftContour());return Math.max.apply(Math,r.rightContour())-t}(r),n=1*t;e.viewbox(-.75,-.95,7.5,n+1.4+.5)}r.SvgHydra=a,r.resizeViewbox=l,r.setListeners=function e(t,n,i,a){var h,u=i.payload;function c(){var r=i.parent;h.remove(),i.remove();var o=r.parent;if(null!==o){for(var l=o.children.indexOf(r),u=[],c=0;c<2;c++){var f=n.createSvgHeads(r.map((function(e){return null})),!1);f.payload.neck=n.svgGroup.line([0,0,0,0]).stroke({width:.1}),o.insertSubtree(l+1,f),e(t,n,f,a),r.zip(f).forEachPreorder((function(e){var r,t=e[0],n=e[1];n.head.move(t.head.x(),t.head.y()),null===(r=n.neck)||void 0===r||r.plot(t.neck.array())})),u.push(f)}u.forEach((function(e){return d(e)})),d(r).afterAll(p)}else p()}function p(){var e=o.fromTree(n.svgTree),r=Math.min.apply(Math,e.leftContour());n.svgTree.zip(e.tree).forEachPreorderX((function(e){var t,n=e.payload[0],o=e.payload[1];if(n.head.animate(700,"<",0).center(2*o.y,1*o.x-r).fill("#000"),null!==e.parent){var i=e.parent.payload[1];(null===(t=n.neck)||void 0===t?void 0:t.animate(700,"<",0)).plot(2*o.y,1*o.x-r,2*i.y,1*i.x-r).stroke("#000")}})),l(t.animate(700,"<",0),n),0===n.svgTree.children.length&&alert("Wow... I can't believe you actually did it!\nSorry I didn't write anything cool for you yet. Perhaps I'll add something later.")}function d(e){e.children.forEach((function(e){return d(e)}));var t=e.payload;return null!==t.neck&&t.neck.animate(200,"<",0).stroke(r.CLONE_COLOR),t.head.animate(200,"<",0).fill(r.CLONE_COLOR)}u.head.click((function(){null!==i.parent&&0===i.children.length&&(a(),(h=t.group().add(u.neck).add(u.head)).animate(500,">",0).opacity(0).afterAll(c))})),i.children.forEach((function(r){return e(t,n,r,a)}))}},347:(e,r)=>{r.__esModule=!0,r.Tree=void 0;var t=function(){function e(e,r){var t=this;this.parent=null,this.children=r,this.payload=e,r.forEach((function(e){return e.parent=t}))}return e.prototype.index=function(){for(var e,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(0===r.length)return this;var n=r[0];return n<this.children.length?(e=this.children[n]).index.apply(e,r.slice(1)):null},e.prototype.makeCopy=function(){return new e(this.payload,this.children.map((function(e){return e.makeCopy()})))},e.prototype.insertSubtree=function(e,r){this.children.splice(e,0,r),r.parent=this},e.prototype.appendChild=function(r){var t=new e(r,[]);return t.parent=this,this.children.push(t),t},e.prototype.remove=function(){var e=this.parent;if(null!==e){var r=e.children.indexOf(this);e.children.splice(r,1),this.parent=null}},e.prototype.forEachPreorder=function(e,r){void 0===r&&(r=0),e(this.payload,r),this.children.forEach((function(t){return t.forEachPreorder(e,r+1)}))},e.prototype.forEachPreorderX=function(e,r){void 0===r&&(r=0),e(this,r),this.children.forEach((function(t){return t.forEachPreorderX(e,r+1)}))},e.prototype.zip=function(r){for(var t=[],n=Math.min(this.children.length,r.children.length),o=0;o<n;o++)t.push(this.children[o].zip(r.children[o]));return new e([this.payload,r.payload],t)},e.prototype.zipX=function(r){for(var t=[],n=Math.min(this.children.length,r.children.length),o=0;o<n;o++)t.push(this.children[o].zipX(r.children[o]));return new e([this,r],t)},e.prototype.map=function(r){return new e(r(this.payload),this.children.map((function(e){return e.map(r)})))},e.prototype.mapX=function(r){return new e(r(this),this.children.map((function(e){return e.mapX(r)})))},e}();r.Tree=t}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}(()=>{var e=t(536),r=document.getElementById("reset-button"),n=document.getElementById("click-counter"),o=SVG("hydra-interactive"),i=0;function a(){n.textContent="Clicks: "+i,i+=1}function l(){o.clear(),i=0,a();var r=new e.HydraSkeleton([]),t=r.tree.appendChild(null).appendChild(null);t.appendChild(null),t.appendChild(null);var n=new e.SvgHydra(o,r);n.repositionNodes(),(0,e.resizeViewbox)(o,n),(0,e.setListeners)(o,n,n.svgTree,a)}l(),r.addEventListener("click",l)})()})();