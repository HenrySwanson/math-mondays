(()=>{"use strict";var e={536:(e,t,r)=>{t.__esModule=!0,t.setListeners=t.resizeViewbox=t.SvgHydra=t.SvgHeadData=t.TreeLayout=t.HydraSkeleton=t.CLONE_COLOR=void 0;t.CLONE_COLOR="#422aa8";var n=r(347);t.HydraSkeleton=function(e){this.tree=new n.Tree(null,e.map((function(e){return e.tree})))};var i=function(){function e(e,t,r){this.tree=new n.Tree({x:e,y:t},r.map((function(e){return e.tree})))}return e.fromTree=function(t){if(0===t.children.length)return new e(0,0,[]);for(var r=t.children.map((function(t,r){var n=e.fromTree(t);return n.shift(r,1),n})),n=0;n<r.length;n++)for(var i=n-1;i>=0;i--){for(var o=r[n].leftContour(),a=r[i].rightContour(),l=Math.min(o.length,a.length),h=1,u=0;u<l;u++)h=Math.min(h,o[u]-a[u]);if(!(h>=1)){var c=1-h,p=n-i;for(u=1;u<=p;u++)r[i+u].shift(c*u/p,0)}}var d=(r[0].tree.payload.x+r[r.length-1].tree.payload.x)/2;return r.forEach((function(e){return e.shift(-d,0)})),new e(0,0,r)},e.prototype.shift=function(e,t){this.tree.forEachPreorder((function(r){r.x+=e,r.y+=t}))},e.prototype._contour=function(e){var t=[];return this.tree.forEachPreorder((function(r,n){var i=r.x;if(n<t.length){var o=t[n];("left"==e&&i<o||"right"==e&&i>o)&&(t[n]=i)}else t.push(i)})),t},e.prototype.leftContour=function(){return this._contour("left")},e.prototype.rightContour=function(){return this._contour("right")},e.prototype.getMinX=function(){return Math.min.apply(Math,this.leftContour())},e.prototype.getMaxX=function(){return Math.max.apply(Math,this.rightContour())},e.prototype.getWidth=function(){return this.getMaxX()-this.getMinX()},e}();t.TreeLayout=i;var o=function(e,t){this.head=e.circle(.5),t?(this.neck=e.line([0,0,0,0]).stroke({width:.1}),this.neck.back()):this.neck=null};t.SvgHeadData=o;var a=function(){function e(e,t){this.svgGroup=e.group(),this.svgTree=this.createSvgHeads(t.tree)}return e.prototype.createSvgHeads=function(e){var t=this;return e.mapX((function(e){return new o(t.svgGroup,null!==e.parent)}))},e.prototype.repositionNodes=function(){var e=i.fromTree(this.svgTree);e.shift(-e.getMinX(),0),this.svgTree.zip(e.tree).forEachPreorderX((function(e){var t,r=e.parent,n=e.payload,i=n[0],o=n[1];if(i.head.center(2*o.y,1*o.x),null!==r){var a=r.payload[1];null===(t=i.neck)||void 0===t||t.plot(2*o.y,1*o.x,2*a.y,1*a.x)}}))},e.prototype.index=function(){for(var e,t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return null!==(r=null===(t=(e=this.svgTree).index.apply(e,n))||void 0===t?void 0:t.payload)&&void 0!==r?r:null},e.prototype.root=function(){return this.svgTree.payload},e}();function l(e,t){var r=1*t.getWidth();e.viewbox(-.75,-.95,7.5,r+1.4+.5)}t.SvgHydra=a,t.resizeViewbox=l,t.setListeners=function e(r,n,o,a){var h,u=o.payload;function c(){var t=o.parent;h.remove(),o.remove();var i=t.parent;if(null!==i){for(var l=i.children.indexOf(t),u=[],c=0;c<2;c++){var s=n.createSvgHeads(t.map((function(e){return null})));s.payload.neck=n.svgGroup.line([0,0,0,0]).stroke({width:.1}),i.insertSubtree(l+1,s),e(r,n,s,a),t.zip(s).forEachPreorder((function(e){var t,r=e[0],n=e[1];n.head.move(r.head.x(),r.head.y()),null===(t=n.neck)||void 0===t||t.plot(r.neck.array())})),u.push(s)}u.forEach((function(e){return d(e)})),d(t).afterAll(p)}else p()}function p(){var e=i.fromTree(n.svgTree);e.shift(-e.getMinX(),0),n.svgTree.zip(e.tree).forEachPreorderX((function(e){var t,r=e.payload[0],n=e.payload[1];if(r.head.animate(700,"<",0).center(2*n.y,1*n.x).fill("#000"),null!==e.parent){var i=e.parent.payload[1];(null===(t=r.neck)||void 0===t?void 0:t.animate(700,"<",0)).plot(2*n.y,1*n.x,2*i.y,1*i.x).stroke("#000")}})),l(r.animate(700,"<",0),e),0===n.svgTree.children.length&&alert("Wow... I can't believe you actually did it!\nSorry I didn't write anything cool for you yet. Perhaps I'll add something later.")}function d(e){e.children.forEach((function(e){return d(e)}));var r=e.payload;return null!==r.neck&&r.neck.animate(200,"<",0).stroke(t.CLONE_COLOR),r.head.animate(200,"<",0).fill(t.CLONE_COLOR)}u.head.click((function(){null!==o.parent&&0===o.children.length&&(a(),(h=r.group().add(u.neck).add(u.head)).animate(500,">",0).opacity(0).afterAll(c))})),o.children.forEach((function(t){return e(r,n,t,a)}))}},347:(e,t)=>{t.__esModule=!0,t.Tree=void 0;var r=function(){function e(e,t){var r=this;this.parent=null,this.children=t,this.payload=e,t.forEach((function(e){return e.parent=r}))}return e.prototype.index=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(0===t.length)return this;var n=t[0];return n<this.children.length?(e=this.children[n]).index.apply(e,t.slice(1)):null},e.prototype.makeCopy=function(){return new e(this.payload,this.children.map((function(e){return e.makeCopy()})))},e.prototype.insertSubtree=function(e,t){this.children.splice(e,0,t),t.parent=this},e.prototype.appendChild=function(t){var r=new e(t,[]);return r.parent=this,this.children.push(r),r},e.prototype.remove=function(){var e=this.parent;if(null!==e){var t=e.children.indexOf(this);e.children.splice(t,1),this.parent=null}},e.prototype.forEachPreorder=function(e,t){void 0===t&&(t=0),e(this.payload,t),this.children.forEach((function(r){return r.forEachPreorder(e,t+1)}))},e.prototype.forEachPreorderX=function(e,t){void 0===t&&(t=0),e(this,t),this.children.forEach((function(r){return r.forEachPreorderX(e,t+1)}))},e.prototype.zip=function(t){for(var r=[],n=Math.min(this.children.length,t.children.length),i=0;i<n;i++)r.push(this.children[i].zip(t.children[i]));return new e([this.payload,t.payload],r)},e.prototype.zipX=function(t){for(var r=[],n=Math.min(this.children.length,t.children.length),i=0;i<n;i++)r.push(this.children[i].zipX(t.children[i]));return new e([this,t],r)},e.prototype.map=function(t){return new e(t(this.payload),this.children.map((function(e){return e.map(t)})))},e.prototype.mapX=function(t){return new e(t(this),this.children.map((function(e){return e.mapX(t)})))},e}();t.Tree=r}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(()=>{var e=r(536),t=document.getElementById("reset-button"),n=document.getElementById("click-counter"),i=SVG("hydra-interactive"),o=0;function a(){n.textContent="Clicks: "+o,o+=1}function l(){i.clear(),o=0,a();var t=new e.HydraSkeleton([]),r=t.tree.appendChild(null).appendChild(null);r.appendChild(null),r.appendChild(null);var n=new e.SvgHydra(i,t);n.repositionNodes(),(0,e.resizeViewbox)(i,e.TreeLayout.fromTree(n.svgTree)),(0,e.setListeners)(i,n,n.svgTree,a)}l(),t.addEventListener("click",l)})()})();