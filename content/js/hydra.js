(()=>{"use strict";var r={536:function(r,t,e){var n=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,o,i=e.call(r),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};t.__esModule=!0,t.SvgHydra=t.SvgHeadData=t.TreeLayout=t.HydraSkeleton=t.CLONE_COLOR=t.NECK_WIDTH=t.LEVEL_SPACING=t.NODE_SPACING=t.NODE_DIAM=void 0,t.NODE_DIAM=.5,t.NODE_SPACING=1,t.LEVEL_SPACING=2,t.NECK_WIDTH=.1,t.CLONE_COLOR="#422aa8";var i=e(347);t.HydraSkeleton=function(r){this.tree=new i.Tree(null,r.map((function(r){return r.tree})))};var a=function(){function r(r,t,e){this.tree=new i.Tree({x:r,y:t},e.map((function(r){return r.tree})))}return r.fromTree=function(t){if(0===t.children.length)return new r(0,0,[]);for(var e=t.children.map((function(t,e){var n=r.fromTree(t);return n.shift(e,1),n})),n=0;n<e.length;n++)for(var o=n-1;o>=0;o--){for(var i=e[n].leftContour(),a=e[o].rightContour(),l=Math.min(i.length,a.length),u=1,c=0;c<l;c++)u=Math.min(u,i[c]-a[c]);if(!(u>=1)){var h=1-u,p=n-o;for(c=1;c<=p;c++)e[o+c].shift(h*c/p,0)}}var f=(e[0].tree.payload.x+e[e.length-1].tree.payload.x)/2;return e.forEach((function(r){return r.shift(-f,0)})),new r(0,0,e)},r.prototype.shift=function(r,t){this.tree.forEachPreorder((function(e){e.x+=r,e.y+=t}))},r.prototype._contour=function(r){var t=[];return this.tree.forEachPreorder((function(e,n){var o=e.x;if(n<t.length){var i=t[n];("left"==r&&o<i||"right"==r&&o>i)&&(t[n]=o)}else t.push(o)})),t},r.prototype.leftContour=function(){return this._contour("left")},r.prototype.rightContour=function(){return this._contour("right")},r.prototype.getMinX=function(){return Math.min.apply(Math,o([],n(this.leftContour()),!1))},r.prototype.getMaxX=function(){return Math.max.apply(Math,o([],n(this.rightContour()),!1))},r.prototype.getWidth=function(){return this.getMaxX()-this.getMinX()},r}();t.TreeLayout=a;var l=function(r,e){this.head=r.circle(t.NODE_DIAM),e?(this.neck=r.line([0,0,0,0]).stroke({width:t.NECK_WIDTH}),this.neck.back()):this.neck=null};t.SvgHeadData=l;var u=function(){function r(r,t){this.svgGroup=r.group(),this.svgTree=this.createSvgHeads(t.tree)}return r.prototype.createSvgHeads=function(r){var t=this;return r.mapX((function(r){return new l(t.svgGroup,null!==r.parent)}))},r.prototype.repositionNodes=function(){var r=a.fromTree(this.svgTree);r.shift(-r.getMinX(),0),this.svgTree.zip(r.tree).forEachPreorderX((function(r){var e,o=r.parent,i=n(r.payload,2),a=i[0],l=i[1];if(a.head.center(l.y*t.LEVEL_SPACING,l.x*t.NODE_SPACING),null!==o){var u=o.payload[1];null===(e=a.neck)||void 0===e||e.plot(l.y*t.LEVEL_SPACING,l.x*t.NODE_SPACING,u.y*t.LEVEL_SPACING,u.x*t.NODE_SPACING)}}))},r.prototype.index=function(){for(var r,t,e,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return null!==(e=null===(t=(r=this.svgTree).index.apply(r,o([],n(i),!1)))||void 0===t?void 0:t.payload)&&void 0!==e?e:null},r.prototype.root=function(){return this.svgTree.payload},r}();t.SvgHydra=u},347:function(r,t){var e=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,o,i=e.call(r),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a},n=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return r.concat(n||Array.prototype.slice.call(t))};t.__esModule=!0,t.Tree=void 0;var o=function(){function r(r,t){var e=this;this.parent=null,this.children=t,this.payload=r,t.forEach((function(r){return r.parent=e}))}return r.prototype.index=function(){for(var r,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(0===t.length)return this;var i=t[0];return i<this.children.length?(r=this.children[i]).index.apply(r,n([],e(t.slice(1)),!1)):null},r.prototype.makeCopy=function(){return new r(this.payload,this.children.map((function(r){return r.makeCopy()})))},r.prototype.insertSubtree=function(r,t){this.children.splice(r,0,t),t.parent=this},r.prototype.appendChild=function(t){var e=new r(t,[]);return e.parent=this,this.children.push(e),e},r.prototype.remove=function(){var r=this.parent;if(null!==r){var t=r.children.indexOf(this);r.children.splice(t,1),this.parent=null}},r.prototype.forEachPreorder=function(r,t){void 0===t&&(t=0),r(this.payload,t),this.children.forEach((function(e){return e.forEachPreorder(r,t+1)}))},r.prototype.forEachPreorderX=function(r,t){void 0===t&&(t=0),r(this,t),this.children.forEach((function(e){return e.forEachPreorderX(r,t+1)}))},r.prototype.zip=function(t){for(var e=[],n=Math.min(this.children.length,t.children.length),o=0;o<n;o++)e.push(this.children[o].zip(t.children[o]));return new r([this.payload,t.payload],e)},r.prototype.zipX=function(t){for(var e=[],n=Math.min(this.children.length,t.children.length),o=0;o<n;o++)e.push(this.children[o].zipX(t.children[o]));return new r([this,t],e)},r.prototype.map=function(t){return new r(t(this.payload),this.children.map((function(r){return r.map(t)})))},r.prototype.mapX=function(t){return new r(t(this),this.children.map((function(r){return r.mapX(t)})))},r}();t.Tree=o},130:function(r,t,e){var n=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,o,i=e.call(r),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a};t.__esModule=!0;var o=e(536),i=document.getElementById("reset-button"),a=document.getElementById("click-counter"),l=SVG("hydra-interactive"),u=0;function c(){a.textContent="Clicks: "+u,u+=1}function h(){l.clear(),u=0,c();var r=new o.HydraSkeleton([]),t=r.tree.appendChild(null).appendChild(null);t.appendChild(null),t.appendChild(null);var e=new o.SvgHydra(l,r);e.repositionNodes(),p(l,o.TreeLayout.fromTree(e.svgTree)),f(l,e,e.svgTree,c)}function p(r,t){var e=3*o.LEVEL_SPACING,n=t.getWidth()*o.NODE_SPACING;r.viewbox(-(.5+o.NODE_DIAM/2),-(.7+o.NODE_DIAM/2),e+1+o.NODE_DIAM,n+1.4+o.NODE_DIAM)}function f(r,t,e,i){var a,l=e.payload;function u(){var l=e.parent;a.remove(),e.remove();var u=l.parent;if(null!==u){for(var p=u.children.indexOf(l),d=[],s=0;s<2;s++){var y=t.createSvgHeads(l.map((function(r){return null})));y.payload.neck=t.svgGroup.line([0,0,0,0]).stroke({width:o.NECK_WIDTH}),y.payload.neck.back(),u.insertSubtree(p+1,y),f(r,t,y,i),l.zip(y).forEachPreorder((function(r){var t,e=n(r,2),o=e[0],i=e[1];i.head.move(o.head.x(),o.head.y()),null===(t=i.neck)||void 0===t||t.plot(o.neck.array())})),d.push(y)}d.forEach((function(r){return h(r)})),h(l).afterAll(c)}else c()}function c(){var e=o.TreeLayout.fromTree(t.svgTree);e.shift(-e.getMinX(),0),t.svgTree.zip(e.tree).forEachPreorderX((function(r){var t,e=r.payload[0],n=r.payload[1];if(e.head.animate(700,"<",0).center(n.y*o.LEVEL_SPACING,n.x*o.NODE_SPACING).fill("#000"),null!==r.parent){var i=r.parent.payload[1];(null===(t=e.neck)||void 0===t?void 0:t.animate(700,"<",0)).plot(n.y*o.LEVEL_SPACING,n.x*o.NODE_SPACING,i.y*o.LEVEL_SPACING,i.x*o.NODE_SPACING).stroke("#000")}})),p(r.animate(700,"<",0),e),0===t.svgTree.children.length&&alert("Wow... I can't believe you actually did it!\nSorry I didn't write anything cool for you yet. Perhaps I'll add something later.")}function h(r){r.children.forEach((function(r){return h(r)}));var t=r.payload;return null!==t.neck&&t.neck.animate(200,"<",0).stroke(o.CLONE_COLOR),t.head.animate(200,"<",0).fill(o.CLONE_COLOR)}l.head.click((function(){null!==e.parent&&0===e.children.length&&(i(),(a=r.group().add(l.neck).add(l.head)).animate(500,">",0).opacity(0).afterAll(u))})),e.children.forEach((function(e){return f(r,t,e,i)}))}h(),i.addEventListener("click",h)}},t={};!function e(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return r[n].call(i.exports,i,i.exports,e),i.exports}(130)})();